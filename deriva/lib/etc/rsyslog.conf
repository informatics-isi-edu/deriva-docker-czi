# /etc/rsyslog.conf â€” container-friendly: stdout/stderr + forward local1

#################
#### MODULES ####
#################
module(load="imuxsock")    # /dev/log from local processes
# module(load="imklog")    # kernel logs (optional in containers)

###########################
#### GLOBAL DIRECTIVES ####
###########################
$RepeatedMsgReduction on

# Disable DNS lookups for performance (safe for omfwd)
$ActionSendStreamDriverMode 1
$ActionSendStreamDriverAuthMode anon

# File/dir perms (mostly ignored since we write to stdio, but harmless)
$FileOwner root
$FileGroup adm
$FileCreateMode 0640
$DirCreateMode 0755
$Umask 0022

# Where to place spool and state files (still needed for queues, etc.)
$WorkDirectory /var/spool/rsyslog

######################
#### MAIN OUTPUTS ####
######################

# Only local facilities go to stdout
local0.*;local1.*;local2.*;local3.*;local4.*;local5.*;local6.*;local7.* \
  action(type="omfile" file="/dev/stdout" flushOnTXEnd="on")

# Errors (local only) to stderr
local0.err;local1.err;local2.err;local3.err;local4.err;local5.err;local6.err;local7.err \
  action(type="omfile" file="/dev/stderr" flushOnTXEnd="on")


# Include any additional snippets
$IncludeConfig /etc/rsyslog.d/*.conf
